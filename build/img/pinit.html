<!DOCTYPE html>
<html>
   <head>
      <title>content</title>
      <style>
         .container{font-size:14px; margin:0 auto; width:960px}
         .test_content{margin:10px 0;}
         .scroller_anchor{height:0px; margin:0; padding:0;}
         .scroller{background: url("4g.png"); border:1px solid #CCC; margin:0 0 10px; z-index:100; height:283px; font-size:18px; font-weight:bold; text-align:center; width:353px;right:50px;position: absolute;top: 186px;}
         .o2-4g,.o2-wifi,.tu-go{height: 500px; width: 60%;border:1px solid red;}
         .o2-travel{height: 500px; width: 60%;border:1px solid red;}
      </style>
   </head>
   <body>
      <div>
         <div class="container">
            <div class="test_content">
               <br><br><br><br>
            </div>
            <!-- This div is used to indicate the original position of the scrollable fixed div. -->
            <div class="scroller_anchor"></div>
            <!-- This div will be displayed as fixed bar at the top of the page, when user scrolls -->
            <div class="scroller"></div>
            <div class="o2-4g">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam ac neque vitae est efficitur convallis. Nam scelerisque felis vitae laoreet rhoncus. Quisque congue massa nec nisl facilisis, quis scelerisque magna ullamcorper. Phasellus vitae erat sed metus tincidunt maximus sed id felis. Nullam eleifend metus odio, id fermentum magna varius sed. Nullam auctor mollis ligula ut lobortis. Nunc eleifend finibus massa ac dictum. Sed vitae arcu non sem vehicula hendrerit vitae vitae sem. Sed a dolor ligula. Nulla eleifend magna augue, vitae egestas purus vulputate et.<br /><br />
                
                Integer id leo mattis, consectetur lorem nec, efficitur ante. Duis at enim ac diam sollicitudin placerat quis nec lorem. Proin eget sapien auctor, varius magna auctor, auctor lacus. Curabitur convallis dui sit amet turpis pharetra molestie. Maecenas sodales sapien at ligula egestas lobortis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus aliquam massa in dictum euismod. Duis mollis metus eu erat euismod scelerisque. Nullam sed purus diam. Nullam pretium ex justo, sed pellentesque nisi rutrum sit amet. Cras vulputate est at leo tempor mattis. Fusce sollicitudin mi venenatis, gravida nibh ac, ullamcorper ante. Sed vel dictum ligula.
                
              <br /> <br /> Integer id leo mattis, consectetur lorem nec, efficitur ante. Duis at enim ac diam sollicitudin placerat quis nec lorem. Proin eget sapien auctor, varius magna auctor, auctor lacus. Curabitur convallis dui sit amet turpis pharetra molestie. Maecenas sodales sapien at ligula egestas lobortis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus aliquam massa in dictum euismod. Duis mollis metus eu erat euismod scelerisque. Nullam sed purus diam. Nullam pretium ex justo, sed pellentesque nisi rutrum sit amet. Cras vulputate est at leo tempor mattis. Fusce sollicitudin mi venenatis, gravida nibh ac, ullamcorper ante. Sed vel dictum ligula.
            </div>
            <div class="o2-wifi" style="margin-top:60px;">
               Praesent sed sodales metus, nec sagittis ante. Donec quis commodo nisl. Curabitur vulputate, nisi id pharetra pulvinar, justo dui tincidunt lorem, quis molestie augue lacus semper ipsum. Aenean venenatis ac mauris ut imperdiet. Morbi neque urna, pulvinar a arcu eget, vulputate placerat felis. Quisque interdum lorem urna, ac lacinia lectus feugiat eu. Etiam sed accumsan tellus. Maecenas faucibus et eros nec laoreet. Vivamus ultrices sapien in dolor vestibulum ultrices.
                <br /> <br />Praesent sed sodales metus, nec sagittis ante. Donec quis commodo nisl. Curabitur vulputate, nisi id pharetra pulvinar, justo dui tincidunt lorem, quis molestie augue lacus semper ipsum. Aenean venenatis ac mauris ut imperdiet. Morbi neque urna, pulvinar a arcu eget, vulputate placerat felis. Quisque interdum lorem urna, ac lacinia lectus feugiat eu. Etiam sed accumsan tellus. Maecenas faucibus et eros nec laoreet. Vivamus ultrices sapien in dolor vestibulum ultrices.
                <br /> <br /> Integer id leo mattis, consectetur lorem nec, efficitur ante. Duis at enim ac diam sollicitudin placerat quis nec lorem. Proin eget sapien auctor, varius magna auctor, auctor lacus. Curabitur convallis dui sit amet turpis pharetra molestie. Maecenas sodales sapien at ligula egestas lobortis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus aliquam massa in dictum euismod. Duis mollis metus eu erat euismod scelerisque. Nullam sed purus diam. Nullam pretium ex justo, sed pellentesque nisi rutrum sit amet. Cras vulputate est at leo tempor mattis. Fusce sollicitudin mi venenatis, gravida nibh ac, ullamcorper ante. Sed vel dictum ligula.
            </div>
            <div class="tu-go"  style="margin-top:60px;">
               Donec felis eros, fermentum volutpat magna sit amet, condimentum auctor elit. Curabitur ut fringilla nisl. Donec nibh erat, scelerisque in dapibus in, blandit at mauris. Etiam sed pretium nulla. Phasellus gravida bibendum arcu quis maximus. Suspendisse congue ex ut tempus tristique. Sed tempor orci dui, nec hendrerit risus tincidunt id. Nunc ac quam et risus pulvinar venenatis quis sit amet magna. Aenean eget arcu rutrum, auctor dolor quis, bibendum arcu. Sed nisl eros, maximus quis varius eget, imperdiet quis felis. Praesent sagittis vestibulum leo vitae condimentum. Integer volutpat leo a sapien iaculis, at ultrices odio ultrices. Fusce accumsan ex eu justo aliquet dapibus. Vivamus at cursus lacus. Quisque maximus lobortis augue, sed mollis purus rhoncus at. Nullam id dui ut velit imperdiet aliquet sed et orci.
                <br /> <br />Donec felis eros, fermentum volutpat magna sit amet, condimentum auctor elit. Curabitur ut fringilla nisl. Donec nibh erat, scelerisque in dapibus in, blandit at mauris. Etiam sed pretium nulla. Phasellus gravida bibendum arcu quis maximus. Suspendisse congue ex ut tempus tristique. Sed tempor orci dui, nec hendrerit risus tincidunt id. Nunc ac quam et risus pulvinar venenatis quis sit amet magna. Aenean eget arcu rutrum, auctor dolor quis, bibendum arcu. Sed nisl eros, maximus quis varius eget, imperdiet quis felis. Praesent sagittis vestibulum leo vitae condimentum. Integer volutpat leo a sapien iaculis, at ultrices odio ultrices. Fusce accumsan ex eu justo aliquet dapibus. Vivamus at cursus lacus. Quisque maximus lobortis augue, sed mollis purus rhoncus at. Nullam id dui ut velit imperdiet aliquet sed et orci.
                <br /> <br />Donec felis eros, fermentum volutpat magna sit amet, condimentum auctor elit. Curabitur ut fringilla nisl. Donec nibh erat, scelerisque in dapibus in, blandit at mauris. Etiam sed pretium nulla. Phasellus gravida bibendum arcu quis maximus. Suspendisse congue ex ut tempus tristique. Sed tempor orci dui, nec hendrerit risus tincidunt id. Nunc ac quam et risus pulvinar venenatis quis sit amet magna. Aenean eget arcu rutrum, auctor dolor quis, bibendum arcu. Sed nisl eros, maximus quis varius eget, imperdiet quis felis. Praesent sagittis vestibulum leo vitae condimentum. Integer volutpat leo a sapien iaculis, at ultrices odio ultrices. Fusce accumsan ex eu justo aliquet dapibus. Vivamus at cursus lacus. Quisque maximus lobortis augue, sed mollis purus rhoncus at. Nullam id dui ut velit imperdiet aliquet sed et orci.
            </div>
            <div class="o2-travel"  style="margin-top:60px;">
               Integer id leo mattis, consectetur lorem nec, efficitur ante. Duis at enim ac diam sollicitudin placerat quis nec lorem. Proin eget sapien auctor, varius magna auctor, auctor lacus. Curabitur convallis dui sit amet turpis pharetra molestie. Maecenas sodales sapien at ligula egestas lobortis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus aliquam massa in dictum euismod. Duis mollis metus eu erat euismod scelerisque. Nullam sed purus diam. Nullam pretium ex justo, sed pellentesque nisi rutrum sit amet. Cras vulputate est at leo tempor mattis. Fusce sollicitudin mi venenatis, gravida nibh ac, ullamcorper ante. Sed vel dictum ligula.
                <br /> <br /> Integer id leo mattis, consectetur lorem nec, efficitur ante. Duis at enim ac diam sollicitudin placerat quis nec lorem. Proin eget sapien auctor, varius magna auctor, auctor lacus. Curabitur convallis dui sit amet turpis pharetra molestie. Maecenas sodales sapien at ligula egestas lobortis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus aliquam massa in dictum euismod. Duis mollis metus eu erat euismod scelerisque. Nullam sed purus diam. Nullam pretium ex justo, sed pellentesque nisi rutrum sit amet. Cras vulputate est at leo tempor mattis. Fusce sollicitudin mi venenatis, gravida nibh ac, ullamcorper ante. Sed vel dictum ligula.
            </div>
             <div style="height:1000px"></div>
         </div>
      </div>
   </body>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> 
   <script>
      // This function will be executed when the user scrolls the page.
      $(window).scroll(function(e) {
      // Get the position of the location where the scroller starts.
      var scroller_anchor = $(".scroller_anchor").offset().top;
      var scroller_anchor2 = $(".o2-4g").offset().top;
      //set the height of the scroll according to the 'console output'  to change the image according to the DIV 
      var scroller_anchor3 = 536;//$(".o2-wifi").offset().top;
      var scroller_anchor4 = 1105;//$(".tu-go").offset().top;
      var scroller_anchor5 = 1674;//$(".o2-travel").offset().top;
//      var o2TravelHeight   = $(".test").offset().top;
      // postion for setting position of the .scroller,url for image,top for top position,
      //opacity for fade effect,activeClass for fade effect for text  
      var floatingBox = function(position,url,top,opacity,activeClass)
      {
          this.position='fixed';
          this.top='283px';
          this.url='4g.png';
          this.activeClass='.o2-4g'
          this.opacity='1';
          $('.scroller').css({'background': 'url('+ url +')','position':position,'top': top,
                              'opacity': opacity,'border':'1px solid #CCC'
                             });
          $(activeClass).css({'opacity': i});
      }
      
      
      if ($(this).scrollTop() < 143)
          {          
           $('.scroller').css({'opacity': '1'});
          }
      
      // Check if the user has scrolled and the current position is after the scroller's start location and if its not already fixed at the top 
      if ($(this).scrollTop() >= scroller_anchor && $('.scroller').css('position') != 'fixed') 
      {    // Change the CSS of the scroller to hilight it and fix it at the top of the screen.
          
         $('.scroller').css({
             'background': 'url("4g.png")',
              'border': '1px solid #000',
              'position': 'fixed'
              //'right': '50px',
              
              
          });
          // Changing the height of the scroller anchor to that of scroller so that there is no change in the overall height of the page.
          //$('.scroller_anchor').css('height', '50px');
        } 
      else if ($(this).scrollTop() < scroller_anchor) 
      {    // If the user has scrolled back to the location above the scroller anchor place it back into the content.
          
          // Change the height of the scroller anchor to 0 and now we will be adding the scroller back to the content.
          $('.scroller_anchor').css('height', '0px');
          
          // Change the CSS and put it back to its original position.
          floatingBox('absolute','4g.png','186px','1','.o2-4g');
      }
          if ($(this).scrollTop() >=scroller_anchor2 && $(this).scrollTop() < scroller_anchor3 )
          {
             //585 is the last scrolling index and 489 is calculated by multiplying the first starting index
             //i.e $(this).scrollTop() with .99 so that we can get exact opacity index 
          var i = 585;
              i = ((i - $(this).scrollTop())/498);
          console.log("scroller_anchor2 "+$(this).scrollTop()+"  bluring_i  "+i );
          floatingBox('fixed','4g.png','99px',i,'.o2-4g');
          }
              
          
          else if($(this).scrollTop() >=scroller_anchor3 && $(this).scrollTop() < scroller_anchor4)
          {   
          var i = 1160;
              i = ((i - $(this).scrollTop())/504);
          console.log("scroller_anchor3 "+$(this).scrollTop()+"  bluring_i  "+i);
          floatingBox('fixed','wifi.png','99px',i,'.o2-wifi');
          
          }else if($(this).scrollTop() >=scroller_anchor4 && $(this).scrollTop() < scroller_anchor5)
          {
          var i = 1724;
              i = ((i - $(this).scrollTop())/500);
          console.log("scroller_anchor4 "+$(this).scrollTop()+"  bluring_i  "+i);
          floatingBox('fixed','togo.png','99px',i,'.tu-go');
          
          }else if($(this).scrollTop() >= scroller_anchor5 && $(this).scrollTop() < 1800)
          {
          console.log("scroller_anchor5 "+$(this).scrollTop());
          floatingBox('fixed','imgpsh_fullsize3.png','99px','1','.o2-travel');
          }
          
          
          else if($(this).scrollTop() >= 1800)
          {
          console.log("test "+$(this).scrollTop());
          floatingBox('absolute','imgpsh_fullsize3.png','1880px','1','.o2-travel');
          }
          
      });
   </script>
</html>